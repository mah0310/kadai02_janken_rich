<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample3.css">
<title>じゃんけん</title>
</head>
<body>

<header>
  <h1 id="topimage">
    じゃんけん<br>
    バトル
</h1>
</header>

<div class="explain">
    <h1>じゃんけんで、ばいきんを倒すんだ！</h1>
    <div >
        <h3>ゲームの説明</h3>
        <p>グー・チョキ・パーのどれかのボタンを押してじゃんけんをしてください。<br>
            1回勝つごとにばいきんのライフが1つ減ります。3連勝してばいきんを倒してください！<br>
            以下から、モードを選択してください
        </p>
        
        <h2 id="easy_mode">Easy</h2>
        <h2 id="normal_mode">Normal</h2>
        
    </div>
</div>


<main>
  <ul>
    <li id="gu_btn">
        <img src="./gu2.PNG" alt="">
    </li>
    <li id="cho_btn">
        <img src="./chyoki.PNG" alt="">
    </li>
    <li id="par_btn">
        <img src="./pah.PNG" alt="">
    </li>
  </ul>
  <div class="baikin" >ばいきんの出した手は？「<span id="pc_hands">なに？</span>」</div>
  <div id="judgment">　</div>
  <div id="bacteria">
    <img src="./b3.PNG" alt="">
  </div>
</main>

<footer></footer>

<script>

let winCount=0;
let gameMode;

$("#easy_mode").on("click",function(){
    gameMode='easy';
    winCount=0;
    alert("ばいきんは弱っているらしい！いくぞ！");
});

$("#normal_mode").on("click",function(){
    gameMode='normal';
    winCount=0;
    alert("さぁがんばろう！！");
});


 
  // 必要なものは、どれかをクリックすると、なに？が置き換わり、あなたの勝ち負けが表示される
  // 各々のボタンごとに乱数処理と勝敗を作ればよいのか！
  // （1）ではまず、グーボタンから



$("#gu_btn").on("click",function(){   
    if(!gameMode){
        alert("モード選択をしてください！");
        return;
    }
// ①乱数処理
    const r=Math.random();
// ②if分岐処理
    let view="";
    let view2="";

    if(gameMode=='easy'){
        if(r<0.7){
            view='チョキ';
            view2='WIN';
        } else{
            const hands=['グー','チョキ','パー'];
            view =hands[Math.floor(Math.random()*3)];
            if(view=='グー') view2='あいこ';
            if(view=='チョキ') view2='WIN';
            if(view=='パー') view2='LOSE';
        }}
    else if(gameMode=='normal'){
        const r=Math.ceil(Math.random()*3);
        if(r==1){
            view='グー';
            view2='あいこ';
        }
        if(r==2){
            view='チョキ';
            view2='WIN';
        }
        if(r==3){
            view='パー';
            view2='LOSE';
        }}

  if(view2=='WIN'){
    winCount++;
  }else{
    winCount=0;
  }
// ③表示処理
   $("#pc_hands").html(view);
   $("#judgment").html(view2);
   if(winCount==0){
    $("#bacteria").html('<img src="b3.PNG">');
   }else if(winCount==1){
    $("#bacteria").html('<img src="b2.PNG">');
   }else if(winCount==2){
    $("#bacteria").html('<img src="b1.PNG">');
   }else if(winCount==3){
    $("#bacteria").html('<img src="b0.PNG">');
   }
  });

//   ----------------------------------------------------------------


// （2）次に、チョキーボタン---------------------------------------------
$("#cho_btn").on("click",function(){   
    if(!gameMode){
        alert("モード選択をしてください！");
        return;
    }
// ①乱数処理
    const r=Math.random();
// ②if分岐処理
    let view="";
    let view2="";

    if(gameMode=='easy'){
        if(r<0.7){
            view='パー';
            view2='WIN';
    } else{
        const hands=['グー','チョキ','パー'];
        view =hands[Math.floor(Math.random()*3)];
        if(view=='グー') view2='LOSE';
        if(view=='チョキ') view2='あいこ';
        if(view=='パー') view2='WIN';
    }}
    else if(gameMode=='normal'){
        const r=Math.ceil(Math.random()*3);
        if(r==1){
            view='グー';
            view2='LOSE';
        }
        if(r==2){
            view='チョキ';
            view2='あいこ';
        }
        if(r==3){
            view='パー';
            view2='WIN';
        }}
 
    if(view2=='WIN'){
        winCount++;
    }else{
        winCount=0;
    }
// ③表示処理
   $("#pc_hands").html(view);
   $("#judgment").html(view2);
   if(winCount==0){
    $("#bacteria").html('<img src="b3.PNG">');
   }else if(winCount==1){
    $("#bacteria").html('<img src="b2.PNG">');
   }else if(winCount==2){
    $("#bacteria").html('<img src="b1.PNG">');
   }else if(winCount==3){
    $("#bacteria").html('<img src="b0.PNG">');
   }
  })
// ----------------------------------------------------------------------


// （3）最後に、パーボタン---------------------------------------------------
  $("#par_btn").on("click",function(){   
    if(!gameMode){
        alert("モード選択をしてください！");
        return;
    }
// ①乱数処理
    const r=Math.random();
// ②if分岐処理
    let view="";
    let view2="";

    if(gameMode=='easy'){
        if(r<0.7){
            view='グー';
            view2='WIN';
        } else{
            const hands=['グー','チョキ','パー'];
            view =hands[Math.floor(Math.random()*3)];
            if(view=='グー') view2='WIN';
            if(view=='チョキ') view2='LOSE';
            if(view=='パー') view2='あいこ';
        }}
    else if(gameMode=='normal'){
        const r=Math.ceil(Math.random()*3);
        if(r==1){
            view='グー';
            view2='WIN';
        }
        if(r==2){
            view='チョキ';
            view2='LOSE';
        }
        if(r==3){
            view='パー';
            view2='あいこ';
        }}
  
        if(view2=='WIN'){
            winCount++;
        }else{
            winCount=0;
        }


// ③表示処理
    $("#pc_hands").html(view);
    $("#judgment").html(view2);
    if(winCount==0){
        $("#bacteria").html('<img src="b3.PNG">');
    }else if(winCount==1){
        $("#bacteria").html('<img src="b2.PNG">');
    }else if(winCount==2){
        $("#bacteria").html('<img src="b1.PNG">');
    }else if(winCount==3){
        $("#bacteria").html('<img src="b0.PNG">');
    }
  })
// ------------------------------------------------------------

</script>
</body>
</html>
